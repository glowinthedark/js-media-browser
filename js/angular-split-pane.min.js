angular.module("shagstrom.angular-split-pane",[]).directive("splitPane",function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{splitPaneProperties:"="},controller:["$scope",function(t){t.components=[],this.addComponent=function(i){t.components.push(i)},this.addDivider=function(i){t.divider=i}}],link:function(t,i,e){var n,s,o=i.children(".split-pane-component:first"),h=i.children(".split-pane-divider"),d=i.children(".split-pane-component:last");if(t.components[0].width&&t.components[0].width.match(/%$/)){i.addClass("vertical-percent");var c=100-parseFloat(t.components[0].width.match(/(\d+)%$/)[1])+"%";o.css({right:c,marginRight:t.divider.width}),h.css({right:c,width:t.divider.width}),d.css({width:c})}else if(t.components[0].width)i.addClass("fixed-left"),o.css({width:t.components[0].width}),h.css({left:t.components[0].width,width:t.divider.width}),d.css({left:t.components[0].width,marginLeft:t.divider.width});else if(t.components[1].width&&t.components[1].width.match(/%$/))i.addClass("vertical-percent"),o.css({right:t.components[1].width,marginRight:t.divider.width}),h.css({right:t.components[1].width,width:t.divider.width}),d.css({width:t.components[1].width});else if(t.components[1].width)i.addClass("fixed-right"),o.css({right:t.components[1].width,marginRight:t.divider.width}),h.css({right:t.components[1].width,width:t.divider.width}),d.css({width:t.components[1].width});else if(t.components[0].height&&t.components[0].height.match(/%$/)){i.addClass("horizontal-percent");var p=100-parseFloat(t.components[0].height.match(/(\d+)%$/)[1])+"%";o.css({bottom:p,marginBottom:t.divider.height}),h.css({bottom:p,height:t.divider.height}),d.css({height:p})}else t.components[0].height&&(i.addClass("fixed-top"),o.css({height:t.components[0].height}),h.css({top:t.components[0].height,height:t.divider.height}),d.css({top:t.components[0].height,marginTop:t.divider.height}));t.components[1].height&&t.components[1].height.match(/%$/)?(i.addClass("horizontal-percent"),o.css({bottom:t.components[1].height,marginBottom:t.divider.height}),h.css({bottom:t.components[1].height,height:t.divider.height}),d.css({height:t.components[1].height})):t.components[1].height&&(i.addClass("fixed-bottom"),o.css({bottom:t.components[1].height,marginBottom:t.divider.height}),h.css({bottom:t.components[1].height,height:t.divider.height}),d.css({height:t.components[1].height})),i.splitPane(),i.on("splitpaneresize",function(e,o){t.splitPaneProperties&&e.target===i[0]&&n!==o.firstComponentSize&&s!==o.lastComponentSize&&t.$apply(function(){n=o.firstComponentSize,t.splitPaneProperties.firstComponentSize=o.firstComponentSize,s=o.lastComponentSize,t.splitPaneProperties.lastComponentSize=o.lastComponentSize})}),t.$watch("splitPaneProperties.firstComponentSize",function(t){!t&&0!==t||t===n||(n=t,i.splitPane("firstComponentSize",t))}),t.$watch("splitPaneProperties.lastComponentSize",function(t){!t&&0!==t||t===s||(s=t,i.splitPane("lastComponentSize",t))})},template:'<div class="split-pane" ng-transclude></div>'}}).directive("splitPaneComponent",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^splitPane",link:function(t,i,e,n){n.addComponent({width:e.width,height:e.height})},template:'<div class="split-pane-component" ng-transclude></div>'}}).directive("splitPaneDivider",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^splitPane",link:function(t,i,e,n){n.addDivider({width:e.width,height:e.height})},template:'<div class="split-pane-divider" ng-transclude></div>'}});